<!-- templates/admin.html -->
{% extends "base.html" %}
{% block content %}
<section class="card section fade-in">
    <span class="badge">üõ°Ô∏è Panel administrativo</span>
    <h2 class="section-title">Gesti√≥n integral de solicitudes</h2>
    <p class="section-subtitle">Controla el flujo de pedidos de impresi√≥n y soporte t√©cnico desde un entorno claro y responsivo.</p>

    <div class="card-grid">
        <article class="card slide-up">
            <h3>Solicitudes de impresi√≥n</h3>
            <p class="section-subtitle">Revisa, descarga archivos y confirma la entrega de cada proyecto de impresi√≥n.</p>
            {% if print_requests %}
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Archivo</th>
                                <th>Color</th>
                                <th>Faz</th>
                                <th>Usuario</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for request in print_requests %}
                                <tr>
                                    <td>{{ request.id }}</td>
                                    <td>
                                        <a class="link-inline" href="{{ url_for('download_file', filename=request.filename) }}" target="_blank">
                                            {{ request.filename }}
                                        </a>
                                    </td>
                                    <td>{{ request.color }}</td>
                                    <td>{{ request.faz }}</td>
                                    <td>
                                        <a class="link-inline" href="{{ url_for('profileADM', user_id=request.user.id) }}">
                                            {{ request.user.username }}
                                        </a>
                                    </td>
                                    <td>
                                        <form action="{{ url_for('delete_print_request', request_id=request.id) }}" method="post" style="display:inline;">
                                            <button type="submit" class="btn btn-primary">Pedido realizado</button>
                                        </form>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="section-subtitle">üéâ No hay solicitudes de impresi√≥n pendientes.</p>
            {% endif %}
        </article>

        <article class="card slide-up" style="animation-delay:0.1s;">
            <h3>Solicitudes de servicio t√©cnico</h3>
            <p class="section-subtitle">Da seguimiento a cada incidencia y confirma su resoluci√≥n en un clic.</p>
            {% if service_requests %}
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Dispositivo</th>
                                <th>Descripci√≥n</th>
                                <th>Usuario</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for request in service_requests %}
                                <tr>
                                    <td>{{ request.id }}</td>
                                    <td>{{ request.device_name }}</td>
                                    <td>{{ request.description }}</td>
                                    <td>
                                        <a class="link-inline" href="{{ url_for('profile', user_id=request.user.id) }}">
                                            {{ request.user.username }}
                                        </a>
                                    </td>
                                    <td>
                                        <form action="{{ url_for('delete_service_request', request_id=request.id) }}" method="post" style="display:inline;">
                                            <button type="submit" class="btn btn-secondary">Pedido realizado</button>
                                        </form>
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p class="section-subtitle">‚úÖ No hay solicitudes de servicio t√©cnico pendientes.</p>
            {% endif %}
        </article>
    </div>
</section>
{% endblock %}
